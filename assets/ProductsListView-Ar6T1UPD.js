import{_ as y,o,c as i,b as t,n as g,g as h,F as u,h as b,t as _,R as L,m as v,a as k,d as m,r as p,e as d,i as x,w as S}from"./index-pQWg6EHF.js";import{l as N}from"./loadingStore-h-BplzEJ.js";import{p as w}from"./productStore-V7lHhx7T.js";import{c as V}from"./cartStore-DzH4K2Sz.js";import"./messageStore-ThBgcMdp.js";const R={props:["currentPage","total"],methods:{switchPage(a){this.$emit("switch-page",a)}}},T={"aria-label":"page navigation"},B={class:"pagination"},D=t("span",{"aria-hidden":"true"},"«",-1),M=[D],z=["aria-label","onClick"],F=t("span",{"aria-hidden":"true"},"»",-1),O=[F];function U(a,s,r,C,P,c){return o(),i("nav",T,[t("ul",B,[t("li",{class:g(["page-item",{disabled:r.currentPage-1<1}])},[t("a",{href:"#",class:"page-link","aria-label":"prev",onClick:s[0]||(s[0]=h(n=>c.switchPage(r.currentPage-1),["prevent"]))},M)],2),(o(!0),i(u,null,b(r.total,n=>(o(),i("li",{key:n,class:g(["page-item",{active:r.currentPage===n}])},[t("a",{class:"page-link",href:"#","aria-label":`page ${n}`,onClick:h(f=>c.switchPage(n),["prevent"])},_(n),9,z)],2))),128)),t("li",{class:g(["page-item",{disabled:r.currentPage+1>r.total}])},[t("a",{href:"#",class:"page-link","aria-label":"next",onClick:s[1]||(s[1]=h(n=>c.switchPage(r.currentPage+1),["prevent"]))},O)],2)])])}const A=y(R,[["render",U]]),E={components:{PaginationComponent:A,RouterLink:L},data(){return{currentPage:1}},computed:{...v(N,["isLoading"]),...v(w,["products"]),totalPages(){return Math.ceil(this.products.length/9)},displayProducts(){return this.products.filter((a,s)=>Math.floor(s/9)+1===this.currentPage)}},methods:{...k(w,["getProductsData"]),...k(V,["addToCart"]),switchPage(a){this.currentPage=a}},mounted(){this.getProductsData()}},j={class:"container my-5"},q=t("h2",{class:"fw-bolder mb-5"},"本店商品",-1),G={class:"list-unstyled row g-4"},H={class:"h-100 card border-0 shadow overflow-hidden"},I=["src","alt"],J={class:"card-body"},K={class:"mb-3 d-flex gap-2"},Q={class:"badge bg-dark py-2"},W={class:"fs-4 mb-3"},X={key:0,class:"text-muted"},Y={class:"text-decoration-line-through"},Z=t("span",{class:"arrow-animation"},[t("span",{class:"arrow"},"→")],-1),tt={class:"d-flex gap-3"},et=["onClick"],at=t("i",{class:"bi bi-search me-2"},null,-1),st=["onClick"],nt=t("i",{class:"bi bi-cart-plus-fill me-2"},null,-1);function ot(a,s,r,C,P,c){const n=p("LoadingOverlay"),f=p("PaginationComponent"),$=p("RouterLink");return o(),i(u,null,[m(n,{active:a.isLoading,"onUpdate:active":s[0]||(s[0]=e=>a.isLoading=e),"z-index":1e3},null,8,["active"]),t("div",j,[q,m(f,{"current-page":P.currentPage,total:c.totalPages,onSwitchPage:c.switchPage},null,8,["current-page","total","onSwitchPage"]),t("ul",G,[(o(!0),i(u,null,b(c.displayProducts,e=>(o(),i("li",{key:e.id,class:"col-md-4"},[t("div",H,[t("img",{class:"card-img-top",src:e.imageUrl,alt:e.title},null,8,I),t("div",J,[t("div",K,[(o(!0),i(u,null,b(e.tags,l=>(o(),i("button",{key:l,type:"button",class:"btn p-0 border-0"},[t("span",Q,"＃"+_(l),1)]))),128))]),t("h3",W,_(e.title),1),t("p",null,[d("NT$ "),e.origin_price!==e.price?(o(),i("span",X,[d("原價 "),t("span",Y,_(e.origin_price),1),Z])):x("",!0),d(" "+_(e.price)+" 元 ",1)]),t("div",tt,[m($,{to:`/product/${e.id}`,custom:""},{default:S(({navigate:l})=>[t("button",{type:"button",role:"link",class:"w-100 btn btn-outline-primary",onClick:l},[at,d("查看詳細內容 ")],8,et)]),_:2},1032,["to"]),t("button",{type:"button",class:"w-100 btn btn-outline-secondary",onClick:l=>a.addToCart(e.id)},[nt,d("加入購物車 ")],8,st)])])])]))),128))])])],64)}const _t=y(E,[["render",ot]]);export{_t as default};
